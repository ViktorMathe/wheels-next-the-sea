{% extends 'base.html' %}
{% block content %}
  <h2 class="page-title">Past Events</h2>

  <div class="event-grid">
    {% for event in past_events %}
      <div class="event-card">
        <div class="event-title">
          
          <h3>{{ event.title }}</h3>  - <a href="{% url 'delete_event' event.id %}"class="btn danger-btn">Delete</a>
        </div>
        <div class="event-description">
          <p>{{ event.description }}</p>
        </div>
        <div class="event-date">
          <p>Date: {{ event.date|date:'d M Y H:i' }}</p>
        </div>

        {% if event.flyer %}
          <img class="event-flyer" src="{{ event.flyer.url }}" alt="{{ event.title }}" data-src="{{ event.flyer.url }}" />
        {% endif %}

        {% if event.folder %}
          <a href="{% url 'year_gallery' event.folder.name %}" class="btn image-btn" style="margin-top=10px">Images</a>
        {% endif %}
      </div>
    {% empty %}
      <p class="no-events">No past events available.</p>
    {% endfor %}
  </div>

  <!-- Flyer Modal -->
  <div id="flyerModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="flyerModalImg" />
  </div>
{% endblock %}

{% block extra_js %}
  <script>
    const modal = document.getElementById('flyerModal')
    const modalImg = document.getElementById('flyerModalImg')
    
    document.querySelectorAll('.event-flyer').forEach((img) => {
      img.addEventListener('click', () => {
        modal.style.display = 'block'
        modalImg.src = img.dataset.src
      })
    })
    
    document.querySelector('.close').addEventListener('click', () => {
      modal.style.display = 'none'
    })
  </script>
{% endblock %}
