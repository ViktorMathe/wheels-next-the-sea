{% extends 'base.html' %}
{% block content %}
  <div id="contact-page">
    <div class="contact-container">
      <!-- Contact Form -->
      <div id="contactus-form">
        <form method="post">
          {% csrf_token %}
          <h2 class="form-h2">Contact Us</h2>
          {{ contact_form.as_p }}
          <button type="submit" name="contact_submit">Send Message</button>
        </form>
      </div>

      <!-- Get in Touch -->
      <div class="contact-info">
        <h2>Get in Touch</h2>

        <!-- Normal display (everyone sees this) -->
        <div id="contact-display">
          <p>
            <strong>Address:</strong> {{ contact_info.address }}
          </p>
          <p>
            <strong>Phone:</strong> {{ contact_info.phone }}
          </p>
          <p>
            <strong>Email:</strong> {{ contact_info.email }}
          </p>

          {% if user.is_superuser %}
            <span id="edit-contact-btn" class="edit-btn" type="button">Edit</span>
          {% endif %}
          <!-- Google Map -->
          <div class="contact-map">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2432.2560921181386!2d0.849!3d52.953!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47d9df4a!2sWells-next-the-Sea!5e0!3m2!1sen!2suk!4v1690000000000" width="100%" width="100%" height="250" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          </div>
        </div>
      </div>

      <!-- Hidden editable form (only superuser can toggle) -->
      {% if user.is_superuser %}
        <div id="contact-edit-modal">
          <span class="close-btn">&times;</span>
          <div id="contact-edit">
            <form method="post">
              {% csrf_token %}
              {{ info_form.as_p }}
              <button type="submit" name="info_submit">Save Info</button>
              <button type="button" id="cancel-edit-btn" class="btn danger-btn">Cancel</button>
            </form>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
